(self.webpackChunkcontacts_manager=self.webpackChunkcontacts_manager||[]).push([[954],{8954:(r,n,e)=>{"use strict";e.r(n),e.d(n,{LoggingModule:()=>b});var t=e(1116),o=e(3337),s=e(1041),a=e(5366),i=e(7371),l=e(9091),c=e(2797),g=e(3070),d=e(9550),p=e(4369);function u(r,n){1&r&&(a.TgZ(0,"mat-card",11),a._uU(1,"Session Expired!"),a.qZA())}function m(r,n){1&r&&(a.TgZ(0,"small",12),a._uU(1," Enter your username! "),a.qZA())}function h(r,n){if(1&r&&(a.TgZ(0,"small",12),a.YNc(1,m,2,0,"small",7),a.qZA()),2&r){const r=a.oxw();a.xp6(1),a.Q6J("ngIf",null==r.loginForm.controls.username.errors?null:r.loginForm.controls.username.errors.required)}}function f(r,n){if(1&r&&(a.TgZ(0,"small",12),a._uU(1),a.qZA()),2&r){const r=a.oxw();a.xp6(1),a.hij(" ",r.userServerError," ")}}function w(r,n){1&r&&(a.TgZ(0,"small",12),a._uU(1," Enter your password! "),a.qZA())}function x(r,n){if(1&r&&(a.TgZ(0,"small",12),a.YNc(1,w,2,0,"small",7),a.qZA()),2&r){const r=a.oxw();a.xp6(1),a.Q6J("ngIf",null==r.loginForm.controls.password.errors?null:r.loginForm.controls.password.errors.required)}}function C(r,n){if(1&r&&(a.TgZ(0,"small",12),a._uU(1),a.qZA()),2&r){const r=a.oxw();a.xp6(1),a.hij(" ",r.passwordServerError," ")}}const Z=[{path:"",component:(()=>{class r{constructor(r,n,e,t){this.api=r,this.auth=n,this.router=e,this.fb=t,this.userServerError="",this.passwordServerError="",this.sessionExpired=!1,this.loggedIn=!1,this.validateLoginForm(),this.router.getCurrentNavigation().extras.state&&(this.sessionExpired=this.router.getCurrentNavigation().extras.state.sessionExpired)}validateLoginForm(){this.loginForm=this.fb.group({username:["",s.kI.required],password:["",s.kI.required]})}ngOnInit(){this.auth.isLoggedIn().subscribe(r=>this.loggedIn=r),this.loggedIn&&this.router.navigate(["contacts"])}onSubmit(){const r=this.loginForm.value;this.userServerError="",this.passwordServerError="",this.api.post("authenticate",{username:r.username,password:r.password}).subscribe(r=>{404==r.statusCode?this.userServerError=r.error:401==r.statusCode?this.passwordServerError=r.error:422==r.statusCode?(this.userServerError=r.error.username,this.passwordServerError=r.error.password):(this.auth.setToken(r.token),this.router.navigate(["contacts"]))})}}return r.\u0275fac=function(n){return new(n||r)(a.Y36(i.s),a.Y36(l.e),a.Y36(o.F0),a.Y36(s.qu))},r.\u0275cmp=a.Xpm({type:r,selectors:[["app-login"]],decls:20,vars:7,consts:[["class","sessionExpiredCard",4,"ngIf"],["fxLayout","row","fxLayoutAlign","center center",1,"login-wrapper"],[1,"box"],["novalidate","",1,"example-form",3,"formGroup","ngSubmit"],[1,"example-full-width"],["matInput","","formControlName","username","name","username","type","text","placeholder","Username"],["username",""],["class","error",4,"ngIf"],["matInput","","formControlName","password","name","password","type","password","placeholder","Password"],["pssword",""],["mat-raised-button","","color","primary","type","submit",1,"btn-block",3,"disabled"],[1,"sessionExpiredCard"],[1,"error"]],template:function(r,n){1&r&&(a.YNc(0,u,2,0,"mat-card",0),a.TgZ(1,"div",1),a.TgZ(2,"mat-card",2),a.TgZ(3,"mat-card-header"),a.TgZ(4,"mat-card-title"),a._uU(5,"Log in"),a.qZA(),a.qZA(),a.TgZ(6,"form",3),a.NdJ("ngSubmit",function(){return n.onSubmit()}),a.TgZ(7,"mat-card-content"),a.TgZ(8,"mat-form-field",4),a._UZ(9,"input",5,6),a.YNc(11,h,2,1,"small",7),a.YNc(12,f,2,1,"small",7),a.qZA(),a.TgZ(13,"mat-form-field",4),a._UZ(14,"input",8,9),a.YNc(16,x,2,1,"small",7),a.YNc(17,C,2,1,"small",7),a.qZA(),a.qZA(),a.TgZ(18,"button",10),a._uU(19,"Log in"),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&r&&(a.Q6J("ngIf",n.sessionExpired),a.xp6(6),a.Q6J("formGroup",n.loginForm),a.xp6(5),a.Q6J("ngIf",n.loginForm.controls.username.invalid&&(n.loginForm.controls.username.dirty||n.loginForm.controls.username.touched)),a.xp6(1),a.Q6J("ngIf",n.userServerError),a.xp6(4),a.Q6J("ngIf",n.loginForm.controls.password.invalid&&(n.loginForm.controls.password.dirty||n.loginForm.controls.password.touched)),a.xp6(1),a.Q6J("ngIf",n.passwordServerError),a.xp6(1),a.Q6J("disabled",n.loginForm.invalid))},directives:[t.O5,c.a8,c.dk,c.n5,s._Y,s.JL,s.sg,c.dn,g.KE,d.Nt,s.Fj,s.JJ,s.u,p.lW],styles:[".login-wrapper[_ngcontent-%COMP%]{max-width:75%;width:100%;margin:2em auto}.login-wrapper[_ngcontent-%COMP%]   .example-form[_ngcontent-%COMP%]{min-width:100%;max-width:300px;width:100%}.login-wrapper[_ngcontent-%COMP%]   .btn-block[_ngcontent-%COMP%], .login-wrapper[_ngcontent-%COMP%]   .example-full-width[_ngcontent-%COMP%]{width:100%}.login-wrapper[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{text-align:center;width:100%;display:block;font-weight:700}.login-wrapper[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{font-size:30px;margin:0}.login-wrapper[_ngcontent-%COMP%]   .mat-card[_ngcontent-%COMP%]{padding:40px 70px 50px}.login-wrapper[_ngcontent-%COMP%]   .mat-stroked-button[_ngcontent-%COMP%]{border:1px solid;line-height:54px;background:#fff7fa}.login-wrapper[_ngcontent-%COMP%]   .mat-form-field-appearance-legacy[_ngcontent-%COMP%]   .mat-form-field-infix[_ngcontent-%COMP%]{padding:.8375em 0}.login-wrapper[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:red}.sessionExpiredCard[_ngcontent-%COMP%]{max-width:75%;width:100%;margin:2em auto;background-color:red}"]}),r})()}];let _=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=a.oAB({type:r}),r.\u0275inj=a.cJS({imports:[[o.Bz.forChild(Z)],o.Bz]}),r})();var v=e(3855);let b=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=a.oAB({type:r}),r.\u0275inj=a.cJS({imports:[[t.ez,_,v.h,s.UX,s.u5]]}),r})()}}]);