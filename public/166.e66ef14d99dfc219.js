"use strict";(self.webpackChunkmyStore=self.webpackChunkmyStore||[]).push([[166],{166:(b,g,e)=>{e.r(g),e.d(g,{LoggingModule:()=>y});var d=e(6895),m=e(3060),a=e(4006),o=e(4650),p=e(8886),c=e(6661),f=e(4859),l=e(3546),h=e(9549),C=e(4144),u=e(1576);function w(n,s){1&n&&(o.TgZ(0,"mat-card",11),o._uU(1,"Session Expired!"),o.qZA())}function x(n,s){1&n&&(o.TgZ(0,"small",12),o._uU(1," Enter your username! "),o.qZA())}function v(n,s){if(1&n&&(o.TgZ(0,"small",12),o.YNc(1,x,2,0,"small",7),o.qZA()),2&n){const r=o.oxw();o.xp6(1),o.Q6J("ngIf",null==r.loginForm.controls.username.errors?null:r.loginForm.controls.username.errors.required)}}function Z(n,s){if(1&n&&(o.TgZ(0,"small",12),o._uU(1),o.qZA()),2&n){const r=o.oxw();o.xp6(1),o.hij(" ",r.userServerError," ")}}function M(n,s){1&n&&(o.TgZ(0,"small",12),o._uU(1," Enter your password! "),o.qZA())}function L(n,s){if(1&n&&(o.TgZ(0,"small",12),o.YNc(1,M,2,0,"small",7),o.qZA()),2&n){const r=o.oxw();o.xp6(1),o.Q6J("ngIf",null==r.loginForm.controls.password.errors?null:r.loginForm.controls.password.errors.required)}}function T(n,s){if(1&n&&(o.TgZ(0,"small",12),o._uU(1),o.qZA()),2&n){const r=o.oxw();o.xp6(1),o.hij(" ",r.passwordServerError," ")}}const F=[{path:"",component:(()=>{class n{constructor(r,t,i,S){this.api=r,this.auth=t,this.router=i,this.fb=S,this.userServerError="",this.passwordServerError="",this.sessionExpired=!1,this.loggedIn=!1,this.validateLoginForm(),this.router.getCurrentNavigation()}validateLoginForm(){this.loginForm=this.fb.group({username:["",a.kI.required],password:["",a.kI.required]})}ngOnInit(){this.auth.isLoggedIn().subscribe(r=>this.loggedIn=r),this.loggedIn&&this.router.navigate(["products"])}onSubmit(){const r=this.loginForm.value;this.userServerError="",this.passwordServerError="",this.api.post("authenticate",{username:r.username,password:r.password}).subscribe(i=>{404==i.statusCode?this.userServerError=i.error:401==i.statusCode?this.passwordServerError=i.error:422==i.statusCode?(this.userServerError=i.error.username,this.passwordServerError=i.error.password):(this.auth.setToken(i.token),this.router.navigate(["products"]))})}}return n.\u0275fac=function(r){return new(r||n)(o.Y36(p.s),o.Y36(c.e),o.Y36(m.F0),o.Y36(a.qu))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-login"]],decls:27,vars:7,consts:[["class","sessionExpiredCard",4,"ngIf"],["fxLayout","row","fxLayoutAlign","center center",1,"login-wrapper"],[1,"box"],["novalidate","",1,"example-form",3,"formGroup","ngSubmit"],[1,"example-full-width"],["matInput","","formControlName","username","name","username","type","text","placeholder","Username"],["username",""],["class","error",4,"ngIf"],["matInput","","formControlName","password","name","password","type","password","placeholder","Password"],["pssword",""],["mat-raised-button","","color","primary","type","submit",1,"btn-block",3,"disabled"],[1,"sessionExpiredCard"],[1,"error"]],template:function(r,t){1&r&&(o.YNc(0,w,2,0,"mat-card",0),o.TgZ(1,"div",1)(2,"mat-card",2)(3,"mat-card-header")(4,"mat-card-title"),o._uU(5,"Log in"),o.qZA(),o._UZ(6,"mat-card-subtitle"),o.TgZ(7,"mat-card-subtitle"),o._uU(8,"To access the backend use the following logging data"),o.qZA(),o.TgZ(9,"mat-card-subtitle"),o._uU(10,"Username: admin | Password: 87654321"),o.qZA(),o.TgZ(11,"mat-card-subtitle"),o._uU(12,"Username: guest | Password: 12345678"),o.qZA()(),o.TgZ(13,"form",3),o.NdJ("ngSubmit",function(){return t.onSubmit()}),o.TgZ(14,"mat-card-content")(15,"mat-form-field",4),o._UZ(16,"input",5,6),o.YNc(18,v,2,1,"small",7),o.YNc(19,Z,2,1,"small",7),o.qZA(),o.TgZ(20,"mat-form-field",4),o._UZ(21,"input",8,9),o.YNc(23,L,2,1,"small",7),o.YNc(24,T,2,1,"small",7),o.qZA()(),o.TgZ(25,"button",10),o._uU(26,"Log in"),o.qZA()()()()),2&r&&(o.Q6J("ngIf",t.sessionExpired),o.xp6(13),o.Q6J("formGroup",t.loginForm),o.xp6(5),o.Q6J("ngIf",t.loginForm.controls.username.invalid&&(t.loginForm.controls.username.dirty||t.loginForm.controls.username.touched)),o.xp6(1),o.Q6J("ngIf",t.userServerError),o.xp6(4),o.Q6J("ngIf",t.loginForm.controls.password.invalid&&(t.loginForm.controls.password.dirty||t.loginForm.controls.password.touched)),o.xp6(1),o.Q6J("ngIf",t.passwordServerError),o.xp6(1),o.Q6J("disabled",t.loginForm.invalid))},dependencies:[d.O5,f.lW,l.a8,l.dk,l.dn,l.n5,l.$j,h.KE,C.Nt,u.xw,u.Wh,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u],styles:[".login-wrapper[_ngcontent-%COMP%]{max-width:75%;width:100%;margin:2em auto}.login-wrapper[_ngcontent-%COMP%]   .example-form[_ngcontent-%COMP%]{min-width:100%;max-width:300px;width:100%}.login-wrapper[_ngcontent-%COMP%]   .example-full-width[_ngcontent-%COMP%], .login-wrapper[_ngcontent-%COMP%]   .btn-block[_ngcontent-%COMP%]{width:100%}.login-wrapper[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{text-align:center;width:100%;display:block;font-weight:700}.login-wrapper[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{font-size:30px;margin:0}.login-wrapper[_ngcontent-%COMP%]   .mat-card[_ngcontent-%COMP%]{padding:40px 70px 50px}.login-wrapper[_ngcontent-%COMP%]   .mat-stroked-button[_ngcontent-%COMP%]{border:1px solid currentColor;line-height:54px;background:#FFF7FA}.login-wrapper[_ngcontent-%COMP%]   .mat-form-field-appearance-legacy[_ngcontent-%COMP%]   .mat-form-field-infix[_ngcontent-%COMP%]{padding:.8375em 0}.login-wrapper[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:red}.sessionExpiredCard[_ngcontent-%COMP%]{max-width:75%;width:100%;margin:2em auto;background-color:red}"]}),n})()}];let P=(()=>{class n{}return n.\u0275fac=function(r){return new(r||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[m.Bz.forChild(F),m.Bz]}),n})();var O=e(4077);let y=(()=>{class n{}return n.\u0275fac=function(r){return new(r||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[d.ez,P,O.h,a.UX,a.u5]}),n})()}}]);